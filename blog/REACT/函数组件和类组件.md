# 函数组件和类组件

## 函数组件和类组件的相同点和不同点

组件：组件允许将`UI`拆分为独立可复用的代码片段，并对每个片段进行独立构思。

相同点：

- 它们都可以接收属性并且返回`react`元素。

不同点：

- 编程思想不同：类组件需要创建实例，是基于面向对象的方式编程。而函数组件不需要创建实例，接收输入，返回输出，基于函数式编程的思想。
- 内存占用：类组件需要创建并保存实例，会占用一定的内存。函数组件不需要创建实例，可以节约内存占用。
- 捕获特性：函数组件具有值捕获特性。
- 可测试性：函数组件更方便编写单元测试。
- 状态：类组件有自己的实例，可以定义状态，而且可以修改状态更新组件。函数组件以前没有状态，现在可以使用`useState`使用状态。
- 生命周期：类组件有自己完整的生命周期，可以在生命周期内编写逻辑，函数组件以前没有生命周期，现在可以使用`useEffect`实现类似生命周期的功能。
- 逻辑复用：类组件可以通过继承实现逻辑的复用，但官方推荐组件优于继承，函数组件可以通过自定义`Hook`实现逻辑的复用。
- 跳过更新：类组件可以通过`shouldComponentUpdate`和`PureComponent`来跳过更新，而函数组件可以使用`React.memo`来跳过更新。
- 发展前景：未来函数组件将会成为主流，因为它可以更好的屏蔽`this`问题、规范和复用逻辑、更好的适合时间切片和并发渲染。

## 有状态组件和无状态组件

有状态组件就是一个类，无状态组件是一个函数（react16.8 新增了`hooks`，函数组件也可以管理状态）。

- 是否拥有`state`：有状态组件可以使用状态`state`，无状态组件不能使用状态`state`。只有继承`component`这个组件它才能拥有`state`进行一些数据的存储和管理，无状态组件仍然可以拥有`props`。
- 生命周期：有状态组件拥有生命周期函数，无状态组件没有生命周期函数。
- 有状态组件能使用`this`，无状态组件不能使用`this`。

## `react`源码如何区分函数组件（`functionComponent`）和类组件 (`classComponent`)

## 为什么函数组件不能用`this`

`this`指的是组件的实例，函数组件没有实例，所以不能用`this`。
