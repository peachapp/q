import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as t,f as s}from"./app-8HN3oAmX.js";const a={},o=s(`<h1 id="移动端上拉加载分页数据时-删除一条数据导致后面加载数据少一条" tabindex="-1"><a class="header-anchor" href="#移动端上拉加载分页数据时-删除一条数据导致后面加载数据少一条"><span>移动端上拉加载分页数据时，删除一条数据导致后面加载数据少一条</span></a></h1><p>在做移动端项目的时候（包括微信小程序），实现分页加载之后，但是要求可以删除加载出来的任意一条数据，这时候数据删除了如果不重置所有数据，那下一次加载就会少加载一条数据。比如一次加载<code>1 2 3 4 5</code>，用户在界面操作把<code>3</code>删了，那后端会认为第二页时<code>7 8 9 10 11</code>，<code>6</code>就会少加载。</p><p>解决办法：</p><ol><li>删除操作后，前端页面刷新。问题：分页回到第一页，不友好。</li><li>和后端商量，不删除数据就传<code>pageNo</code>和<code>PageSize</code>，如果删了数据，就再加一个<code>id</code>，这个<code>id</code>为当前获取数据总量的最后一条数据的<code>id</code>，后端会根据这个<code>id</code>获取它后面的数据，这样就不会少获取数据了。</li><li>把页的这个概念去掉，使用索引代替页。</li></ol><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 前台发请求</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;num&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//一页项目个数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;offset&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> //从索引的第几位开始查询</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>后台的查询条件使用<code>offset &gt; 5</code>来查，这样新请求的数据就是<code>6 7 8 9 10</code>了。</p>`,6),n=[o];function d(c,l){return t(),i("div",null,n)}const h=e(a,[["render",d],["__file","移动端上拉加载分页数据时，删除一条数据导致的问题.html.vue"]]),A=JSON.parse('{"path":"/BUGS/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%AF%BC%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98.html","title":"移动端上拉加载分页数据时，删除一条数据导致后面加载数据少一条","lang":"zh-CN","frontmatter":{"category":["移动端"],"tag":["遇到过的问题"],"description":"移动端上拉加载分页数据时，删除一条数据导致后面加载数据少一条 在做移动端项目的时候（包括微信小程序），实现分页加载之后，但是要求可以删除加载出来的任意一条数据，这时候数据删除了如果不重置所有数据，那下一次加载就会少加载一条数据。比如一次加载1 2 3 4 5，用户在界面操作把3删了，那后端会认为第二页时7 8 9 10 11，6就会少加载。 解决办法：...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/BUGS/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%AF%BC%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98.html"}],["meta",{"property":"og:site_name","content":"🍑的博客 ！"}],["meta",{"property":"og:title","content":"移动端上拉加载分页数据时，删除一条数据导致后面加载数据少一条"}],["meta",{"property":"og:description","content":"移动端上拉加载分页数据时，删除一条数据导致后面加载数据少一条 在做移动端项目的时候（包括微信小程序），实现分页加载之后，但是要求可以删除加载出来的任意一条数据，这时候数据删除了如果不重置所有数据，那下一次加载就会少加载一条数据。比如一次加载1 2 3 4 5，用户在界面操作把3删了，那后端会认为第二页时7 8 9 10 11，6就会少加载。 解决办法：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-28T07:24:37.000Z"}],["meta",{"property":"article:author","content":"🍑"}],["meta",{"property":"article:tag","content":"遇到过的问题"}],["meta",{"property":"article:modified_time","content":"2024-08-28T07:24:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"移动端上拉加载分页数据时，删除一条数据导致后面加载数据少一条\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-28T07:24:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"🍑\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[],"git":{"createdTime":1724682842000,"updatedTime":1724829877000,"contributors":[{"name":"songzhichao","email":"caoxu@boyetrade.com","commits":2}]},"readingTime":{"minutes":1.13,"words":339},"filePathRelative":"BUGS/移动端上拉加载分页数据时，删除一条数据导致的问题.md","localizedDate":"2024年8月26日","excerpt":"\\n<p>在做移动端项目的时候（包括微信小程序），实现分页加载之后，但是要求可以删除加载出来的任意一条数据，这时候数据删除了如果不重置所有数据，那下一次加载就会少加载一条数据。比如一次加载<code>1 2 3 4 5</code>，用户在界面操作把<code>3</code>删了，那后端会认为第二页时<code>7 8 9 10 11</code>，<code>6</code>就会少加载。</p>\\n<p>解决办法：</p>\\n<ol>\\n<li>删除操作后，前端页面刷新。问题：分页回到第一页，不友好。</li>\\n<li>和后端商量，不删除数据就传<code>pageNo</code>和<code>PageSize</code>，如果删了数据，就再加一个<code>id</code>，这个<code>id</code>为当前获取数据总量的最后一条数据的<code>id</code>，后端会根据这个<code>id</code>获取它后面的数据，这样就不会少获取数据了。</li>\\n<li>把页的这个概念去掉，使用索引代替页。</li>\\n</ol>","autoDesc":true}');export{h as comp,A as data};
