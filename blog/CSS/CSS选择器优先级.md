# `CSS`选择器优先级

`css`权重指的是`css`选择器的优先级，优先级高的`css`样式会覆盖优先级低的`css`样式，优先级越高说明权重越高，反之亦然。

权重的四个特殊性等级定义：

1. 行内样式：`x,0,0,0`。
2. `ID`选择器：`0,x,0,0`。
3. 类选择器|属性选择器|伪类选择器：`0,0,x,0`。
4. 元素和伪元素选择器：`0,0,0,x`。

计算方法：

1. 每个等级的初始值为`0`。
2. 每个等级的叠加为选择器出现的次数相加。
3. 不可进位，比如`0,99,99,99`。
4. 依次表示为：`0,0,0,0`。
5. 每个等级计数之间没关联。
6. 等级判断从左向右，如果某一位数值相同，则判断下一位数值。
7. 如果两个优先级相同，则最后出现的优先级高，`!important`也适用。
8. 通配符选择器的特殊性值为：`0,0,0,0`。
9. 继承样式优先级最低，通配符样式优先级高于继承样式优先级。
10. `!important`（权重），它没有特殊性值，但它的优先级是最高的，为了方便记忆，可以认为它的特殊性值为：`1,0,0,0,0`。

计算实例：

1. `#demo a{color: orange;}/*特殊性值：0,1,0,1*/`
2. `div#demo a{color: red;}/*特殊性值：0,1,0,2*/`

注意：

1. 样式应用时，`css`会先查看规则的权重（`!important`），加了权重的优先级最高，当权重相同的时候，会比较规则的特殊性。
2. 特殊性值越大的声明优先级越高。
3. 相同特殊性值的声明，根据样式引入的顺序，后声明的规则优先级高（距离元素出现最近的）。
4. 部分浏览器由于字节溢出问题出现的进位表现不做考虑。

测试：

```html
<!-- hello在页面上表现为红色，蓝色样式虽然是后声明的，但是红色样式选择器的优先级更高，所以表现为红色 -->
<style>
  .box span {
    color: red;
  }
  span {
    color: blue;
  }
</style>

<div class="box">
  <span>hello</span>
</div>
```

总结：

1. 常用选择器优先级：`行内 > id > class > tag`。
2. `!important`可以提升样式优先级，但不建议使用。如果`!important`被用于一个简写的样式属性，那么这条简写的样式属性所代表的子属性都会被应用上`!important`。 例如：`background: blue !important;`。
3. 如果两条样式都使用`!important`，则权重值高的优先级更高。
4. 在`css`样式表中，同一个`CSS`样式写了两次，后面的会覆盖前面的。
5. 样式指向同一元素，权重规则生效，权重大的被应用。
6. 样式指向同一元素，权重规则生效，权重相同时，就近原则生效，后面定义的被应用。
7. 样式不指向同一元素时，权重规则失效，就近原则生效，离目标元素最近的样式被应用。

[《CSS 优先级计算及应用》](https://www.jianshu.com/p/1c4e639ff7d5)\
[《CSS 优先级计算规则》](http://www.cnblogs.com/wangmeijian/p/4207433.html)\
[《有趣：256 个 class 选择器可以干掉 1 个 id 选择器》](https://www.zhangxinxu.com/wordpress/2012/08/256-class-selector-beat-id-selector/)
