# 跨域

https://juejin.cn/post/6844903767226351623#heading-11

> 浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域。\
> 在前后端分离的模式下，前后端的域名是不一致的，此时就会发生跨域访问问题。在请求的过程中我们要想获取数据一般都是 `POST/GET`请求，所以就会出现跨域问题。

同源策略：

同源策略是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到`XSS`、`CSRF`等攻击。所谓同源是指"`域名` + `端口` + `协议`"三者相同，即便两个不同的域名指向同一个`ip地址`，也非同源。

同源策略限制内容：

- `Cookie`、`LocalStorage`、`IndexedDB`等存储性内容。
- `DOM`节点。
- `AJAX`请求发送后，会被浏览器拦截。

但是有三个标签允许跨域加载资源：

- `<img src="XXX">`
- `<link href="XXX">`
- `<script src="XXX">`

常见跨域场景：

当主域名、子域名、端口号、协议中任意一个不相同时，都算作不同域。不同域之间相互请求资源，就算作“跨域”。

解决跨越问题：

1. 使用`ajax`的`jsonp`。缺点：请求方式只能是`GET`请求。
2. 使用`CORS`。特点：前端代码和未处理跨域前一样，即普通的`ajax`请求，但服务器代码添加了一段解决跨域的代码。
3. 使用代理`Proxy`，只在开发环境生效。
