# 包含块

## 包含块

包含块（`containing block`）就是元素用来计算和定位的一个框。

1. 根元素（很多场景下可以看成是`<html>`）被称为“初始包含块”，其尺寸等同于浏览器可视窗口的大小。
2. 对于其他元素，如果该元素的`position`是`relative`或`static`，则“包含块”由其最近的块容器祖先元素的`content box`边界形成。
3. 如果元素的`position`是`fixed`，则“包含块”是“初始包含块”。
4. 如果元素的`position`是`absolute`，则“包含块”由最近的`position`不为 `static`的祖先元素建立，具体方式如下：
   - 如果该祖先元素是纯`inline`元素，则规则略复杂：
     - 假设给行内元素的前后各生成一个宽度为`0`的行内盒子（`inline box`），则这两个行内盒子的`padding box`外面的包围盒就是行内元素的“包含块”。
     - 如果该行内元素被跨行分割了，那么“包含块”是未定义的，`CSS2.1`规范并没有明确定义，浏览器自行发挥，否则，“包含块”由该祖先元素的`padding box`边界形成。
   - 如果没有符合条件的祖先元素，则“包含块”是“初始包含块”。

## `absolute`的包含块计算方式跟正常流有何不同

1. 内联元素也可以作为“包含块”所在的元素。
2. “包含块”所在的元素不是父块级元素，而是最近的`position`不为`static`的祖先元素或根元素。
3. 边界是`padding box`而不是`content box`。
