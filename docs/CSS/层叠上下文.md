# 层叠上下文

层叠上下文，英文称作”`stacking context`”。是`HTML`中一个三维的概念。如果一个元素含有层叠上下文，我们可以理解为这个元素在`z`轴上就“高人一等”。

你可以把`层叠上下文`理解为当官：网页中有很多很多的元素，我们可以看成是真实世界的芸芸众生。真实世界里，我们大多数人是普通老百姓们，还有一部分人是做官的官员。这里的“官员”就可以理解为网页中的层叠上下文元素。

换句话说，页面中的元素有了层叠上下文，就好比我们普通老百姓当了官，一旦当了官，相比普通老百姓而言，离皇帝更近了，就等同于网页中元素级别更高，离用户更近了。

当元素发生层叠的时候，其覆盖关系遵循下面两个准则：

1. 谁大谁上：当具有明显的层叠水平标示的时候，如识别的`z-indx`值，在同一个层叠上下文领域，层叠水平值大的那一个覆盖小的那一个。通俗讲就是官大的压死官小的。
2. 后来居上：当元素的层叠水平一致、层叠顺序相同的时候，在`DOM`流中处于后面的元素会覆盖前面的元素。

层叠上下文元素有如下特性：

- 层叠上下文的层叠水平要比普通元素高（原因后面会说明）。
- 层叠上下文可以阻断元素的混合模式（见此文第二部分说明）。
- 层叠上下文可以嵌套，内部层叠上下文及其所有子元素均受制于外部的层叠上下文。
- 每个层叠上下文和兄弟元素独立，也就是当进行层叠变化或渲染的时候，只需要考虑后代元素。
- 每个层叠上下文是自成体系的，当元素发生层叠的时候，整个元素被认为是在父层叠上下文的层叠顺序中。

翻译成真实世界语言就是：

- 当官的比老百姓更有机会面见圣上。
- 领导下去考察，会被当地官员阻隔只看到繁荣，看不到真实民情。
- 一个家里，爸爸可以当官，孩子同时也是可以当官的。但是，孩子这个官要受爸爸控制。
- 自己当官，兄弟不占光。有什么福利或者变故只会影响自己的孩子们。
- 每个当官的都有属于自己的小团体，当家眷管家发生摩擦磕碰的时候（包括和其他官员的家眷管家），都是要优先看当官的也就是主子的脸色。
